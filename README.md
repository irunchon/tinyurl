# tinyurl  

### Сервис по созданию сокращённых URL-адресов  
Сервис генерирует для URL сокращённый адрес - хэш длиной в 10 символов. Хэш состоит из символов латинского алфавита в врехнем и нижнем регистре, цифр и символа "_" (подчёркивание).  
Для использования сервисом предоставлен API:
* HTTP (используется порт 8080)  
* GRPC (используется порт 50051)  

Предоставляется две опции для хранения данных (соответствие исходный URL и его хэш): напрямую в памяти или в БД Postgres. Выбор типа хранилища осуществляется через задание переменной окружения в файле .env:  
`STORAGE_TYPE=postgres` для использования БД  
`STORAGE_TYPE=inmemory` для использования памяти сервиса    

### Сборка сервиса    
Сервис может быть запущен в виде Docker-образа. В этом случае используется только inmemory хранилище.  
В случае использования БД до запуска сервиса нужно запустить соответствующий контейнер с postgres.    
Для удобства сборки и запуска docker и сервиса заданы соответствующие цели в Makefile.  

Сборка и запуск сервиса в виде docker:  
```bash
$ make docker-build  
$ make docker-run  
```  
Запуск docker с postgres:  
```bash
$ make compose-up  
``` 
Запуск сервиса без использования docker:  
```bash
$ make
```  
